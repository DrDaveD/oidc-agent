# Configuration
## oidc-agent Directory
An oidc-agent directory will be created when using oidc-gen for the first time. 
Depending on the existence of ```~/.config``` it will be located at one of these
locations:
- ```~/.config/oidc-agent```
- ```~/.oidc-agent```

Alternatively the location can also be set through an environment variable
called ```OIDC_CONF_DIR```. However, we note that this environment variable has
to be present whenever you use one of the ```oidc-``` binaries. It is therefore
recommend to set it in the ```.bashrc``` or similar. See also [Persisting
oidc-agent](#persisting-oidc-agent-through-.bashrc).

All account configuration generated by ```oidc-gen``` are saved in this
oidc-agent directory. Additionally there is a config file named ```issuer.config```. This file can be used to specify a list of issuers (one issuer per line) that are used as suggestions by oidc-gen. oidc-gen will also update this issuer list after an account configuration was created successfully. oidc-agent installs a similar file under ```/etc/oidc-agent```, however, that file should not be edited by the user, but it might be updated with new oidc-agent versions.

## oidc-agent Integration
### Persisting oidc-agent through ```.bashrc```
A simple way to make oidc-agent persistent is to include this line in your
`.bashrc`:
```
test -e ~/tmp/oidc-agent.env && . ~/tmp/oidc-agent.env
```
And to run the agent as `oidc-agent > ~/tmp/oidc-agent.env`
From now on every new shell should have access to the agent. 

You can test this with:
```
oidc-token <shortname>
```
### X Integration
On can create the file ```/etc/X11/Xsession.d/91oidc-agent``` with the following content:
```
if has_option use-oidc-agent; then
    eval `/usr/bin/oidc-agent`
fi 
```
Then add use-oidc-agent to ```/etc/X11/Xsession.options```. Here's the current contents of that file:
```
# $Id: Xsession.options 189 2005-06-11 00:04:27Z branden $
#
# configuration options for /etc/X11/Xsession
# See Xsession.options(5) for an explanation of the available options.
allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
use-session-dbus
use-oidc-agent
```
This way, oidc-agent is available throughout the entire X session (and all
terminals therein) much the same way as ssh-agent.

<!-- TODO check on that -->

## Other Configuration
Generally oidc-agent does not use any configuration files. (Configuration files
for [seccomp](security.md#seccomp) and the already mentioned ```issuer.conf``` excluded.) 
Configuration needed is done mostly through command line options to the
different components and in some cases through environement variables.
If some command line options are used for every call, it makes sense to define
an alias for it in ```.bashrc``` or ```.bash_aliases```, e.g. ```alias oidc-add="oidc-add --pw-store=3600"``` or also ```alias oidc-agent="`oidc-agent > ~/tmp/oidc-agent.env`"```.
