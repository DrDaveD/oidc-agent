                                    +-------------------------+             +-------------------+
                                    |                         |             |                   |
                                    |        oidc-agent       |             |  OpenID Provider  |
                                    |                         |             |                   |
                                    |  +-------------------+  |    OIDC     |                   |
                                    |  |                   |  |communication|                   |
                                    |  | oidc-agent-daemon <---------------->                   |
                                    |  |                   |  |             +-------------------+
                                    |  |                   |  |
                                    |  |                   |  |
                                    |  +---+-----+-^-------+  |
                                    |      |     | |forward   |
+----------------+                  |  +---------v---------+  |                     +-------------------+
|                |                  |  |   |               |  |                     |                   |
|    oidc-add    |  load config     |  |  oidc-agent-proxy |  | access token request|    agent-client   |
|                +--------------------->   |               <------------------------+  e.g. oidc-token  |
|                <---------------------+   |               +------------------------>                   |
|                |     status       |  |   |               |  |    access token     |                   |
+------------+---+                  |  +--------+-^--------+  |                     +-------------------+
             |                      |      |    | |           |
             |                      +-------------------------+
         read|              read/write     |    | |
             |            +----------------+    | |
             |     +------v--+            status| |gen config
             |     |         |                  | |
             +----->encrypted|                  | |
                   | account |           +------v-+------+
                   | config  | read/write|               |
                   |         <-----------+   oidc-gen    |
                   |         |           |               |
                   |         |           |               |
                   |         |           |               |
                   +---------+           |               |
                                         +---------------+

