oidc-agent (2.2.2) UNRELEASED; urgency=medium

  [ Marcus hardt ]
  * Trying to fix debuild messages
  * Updated dependency versions

  [ Gabriel Zachmann ]
  * Fixes dependencies versions
  * adds man pages

  [ Gabriel Zachmann ]
  * Support for Authorization Code Flow
  * Support for Device Flow
  * Support for user defined scopes
  * Couple of minor improvements
  * Couple of bugfixes

  [ Gabriel Zachmann ]
  * Support for providing the device authorization endpoint manually

  [ Gabriel Zachmann ]
  * Removed https://perun.elixir-czech.cz/oidc/ from issuer.config.

  [ Marcus Hardt ]
  * Add IAM of DEEP to issuer.conf
  * Also accept libcurl4 as a dependency

  [ Gabriel Zachmann ]
  * Adds documentation notes on expiring refresh tokens 

  [ Gabriel Zachmann ]
  * Adds possibility to build the C-API as static library
  * oidc-token now uses this library

  [ Gabriel Zachmann ]
  * fixed segmentation fault for an unchecked file existence

  [ Gabriel Zachmann ]
  * Fixes static library 
  * Includes Refactoring
  * Hides client secret
  * Adds optional client name identifier when using dynamic registration
  * Optionally prints the device code url QR-code directly to the terminal
  * Validation for redirect url format
  * Fixes some typos
  * Backward-compatible API-change: ipc access token requests now also contain
    the associated issuer; also the C-API includes it

  [ Gabriel Zachmann ]
  * Replaces JSON Parser Library
  * On default only one configuration file for client and account config is
    generated.
  * json and list dependencies are now included as source files not as a static
    library 
  * oidc-agent can now be started with a default lifetime for account
    configuartions
  * a lifetime can be specified when using oidc-add
  * Better no_color support. 
  * Memory encryption: Encrypting refresh_token and client credentials when
    not used.
  * oidc-agent can now be locked. This includes additional encryption for access 
    tokens, refresh tokens and client credentials.
  * Supporting seccomp (can be turned off) to restrict system calls
  * Automatic call of authorization url can be turned off
  * Adds support for bash-completion
  * Changes to command line arguments: no longer using space delimited strings
  * Removed the feature to list the currently loaded account configurations
  * Token Request can now include an application hint
  * Token Request Response now includes expires_at
  * Unloading accounts does not require a password anymore
  * Added option to unload all loaded accounts.
  * Improvements to the memory management
  * Fixed a bug where automatic account generation failed after successful
    dynamic client registration.
  * Improved UX: checking if oidc-add can connect to agent before prompting
    for encryption password

  [ Gabriel Zachmann ]
  * Fixes a bug related to merging json objects
  * Improves UI: oidc-gen now does not prompt for refresh token. Use the --rt
    option insted.
  * Improves UI: oidc-gen only prompts for credentials if using the password
    flow
  * Improved flow internal handling of dynamic client registration 
  * Fixes a missing seccomp syscall

  [ Gabriel Zachmann ]
  * Fixed a bug that disabled seccomp for oidc-add and oidc-token
  * Internal Improvements to bash-completion
  * Fixed a bug where dyn client reg would fail if the preselected scope was
    modified.

  [ Gabriel Zachmann ]
  * Fixed a bug that autoremoved also accounts with infinite lifetime when an
    account with limited lifetime expired
  * Added missing seccomp syscalls
  * Fixed a bug that broke bash completion 
  * Fixed possible segmentation faults
  * Disabled seccomp on default
  * Disables Tracing: Cannot attach using ptrace 
  
  [ Gabriel Zachmann ]
  * Now using base64 encoding instead of hex encoding for all new encryptions 
  * Updated the config file format used for all new encryptions; this includes
    the version it was generated with
  * Added possibility to update a config file to the newest file format /
    encryption
  * Improved the en/decryption, so that all parameters needed are now saved
    (linked to the file format)
  * Fixed seg faults
  * Allows usage of cjson package instead of included source files
  * Fixed double response from oidc-agent for check request if agent locked
  * Changes to the libsodium depencency: required newer version, now included
    as static library
  * Now providing a shared library and not only a static library
  * The shared library is provided in the liboidc-agent2 package, the needed
    development files in the liboidc-agent-dev package
  * Fixed invalid read in stringToJSON
  * Fixed possible double frees when the already set value is passed to a
    setter
  * Fixed missing authentication for device code access token requests
  * Now allowing using OIDPs that support the device flow, but don't advertise
    it by using the oidc-gen --dae option
  * Improved UX: checking if oidc-gen can connect to agent before prompting
    the user for any information
  * Support for IPC encryption: oidc-add and oidc-gen now only communicate in
    an encrypted way with oidc-agent
  * Fixed a bug where the grant_type parameter was falsly included in the auth
    code url
  * Improved the account listing output

  [ Gabriel Zachmann ]
  * Fixed a bug causing problems with the device flow
  * Fixed memory leaks

  [ Gabriel Zachmann ]
  * Fixed a bug due to which errors during token revocation were ignored
  * Fixed a bug displaying a (wrong) error message when token revocation
    succeeded and the server answered with an empty response when using
    encrypted ipc communication 
  * Fixed a bug where the browser would not redirect to the webserver when the
    chosen port was to high
  * Fixed a sementation fault if the config tmp file did not contain the
    account shortname
  * Fixed broken bash-completion when oidcdir did not yet exist 

  [ Gabriel Zachmann ]
  * Fixed build error if bin dir not existed
  * Fixed a problem with unity OP where access token did not have any scope
  * Fixed strange additional parameters in the auth code exchange request 
  * Fixed superfluous error logs when checking if a string is a json object
  * Changed encoding for memory encryption from hex to base64 

  [ Gabriel Zachmann ]
  * Fixed a bug due to which oidc-agent would return a wrong already loaded
    account config when generating a new account config
  * Improved error handling when no authorization flow possible
  * Fixed a seg fault when dynamic client registration failed
  * Fixed a seg fault in memory decryption if account config does not have a
    client secret (public client)
  * Added support for PKCE
  * Added support for public clients
  * Fixed a bug where it was possible to display issuer urls that only differ
    in the trayling slash twice when using oidc-gen
  * Enforce usage of openid and offline_access scope in all cases

  [ Gabriel Zachmann ]
  * Improve error message when necessary scopes cannot be registered during
    dynamic client registration
  * If necessary scopes cannot be registered during dynamic client
    registration, a public client is tried
  * Fixed memory leaks
  * Allow updating of public clients by using the -m and --pub option

  [ Gabriel Zachmann ]
  * Added public client for aai.egi.eu

 -- Marcus Hardt <hardt@kit.edu>  Wed, 06 Feb 2019 11:08:53 +0100
